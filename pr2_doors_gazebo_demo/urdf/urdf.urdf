<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from door.urdf.xacro                | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="door" xmlns:body="http://playerstage.sourceforge.net/gazebo/xmlschema/#body" xmlns:controller="http://playerstage.sourceforge.net/gazebo/xmlschema/#controller" xmlns:gazebo="http://playerstage.sourceforge.net/gazebo/xmlschema/#gz" xmlns:geom="http://playerstage.sourceforge.net/gazebo/xmlschema/#geom" xmlns:interface="http://playerstage.sourceforge.net/gazebo/xmlschema/#interface" xmlns:joint="http://playerstage.sourceforge.net/gazebo/xmlschema/#joint" xmlns:model="http://playerstage.sourceforge.net/gazebo/xmlschema/#model" xmlns:physics="http://playerstage.sourceforge.net/gazebo/xmlschema/#physics" xmlns:renderable="http://playerstage.sourceforge.net/gazebo/xmlschema/#renderable" xmlns:rendering="http://playerstage.sourceforge.net/gazebo/xmlschema/#rendering" xmlns:sensor="http://playerstage.sourceforge.net/gazebo/xmlschema/#sensor" xmlns:xacro="http://www.ros.org/wiki/xacro" xmlns:xi="http://www.w3.org/2001/XInclude">
  <link name="world"/>
  <joint name="floor1_joint" type="planar">
    <parent link="world"/>
    <origin rpy="0 0 0" xyz="1.25 0.65 0.0"/>
    <child link="floor1_link"/>
  </joint>
  <!-- link blocks -->
  <link name="floor1_link">
    <inertial>
      <mass value="100"/>
      <com xyz="0 0 0.0"/>
      <inertia ixx="10" ixy="0" ixz="0" iyy="10" iyz="0" izz="10"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 8 0.001"/>
      <geometry>
        <box size="8 8 0.002"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0.0 0.0 0.0" xyz="0 8 0.001"/>
      <geometry>
        <box size="8 8 0.002"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="floor1_link">
    <material>PR2/Grey</material>
    <mu1>50.0</mu1>
    <mu2>50.0</mu2>
    <kp>1000000000.0</kp>
    <kd>1.0</kd>
  </gazebo>
  <joint name="floor2_joint" type="fixed">
    <parent link="floor1_link"/>
    <origin rpy="0 0 0" xyz="0 -8 0"/>
    <child link="floor2_link"/>
  </joint>
  <link name="floor2_link">
    <inertial>
      <mass value="100"/>
      <com xyz="0 0 0.0"/>
      <inertia ixx="10" ixy="0" ixz="0" iyy="10" iyz="0" izz="10"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 -4 0.000"/>
      <geometry>
        <box size="8 8 0.002"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0.0 0.0 0.0" xyz="0 -4 0.000"/>
      <geometry>
        <box size="8 8 0.002"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="floor2_link">
    <material>PR2/Grey</material>
    <mu1>50.0</mu1>
    <mu2>50.0</mu2>
    <kp>100000000.0</kp>
    <kd>1.0</kd>
  </gazebo>
  <joint name="wall1_joint" type="fixed">
    <parent link="floor1_link"/>
    <origin rpy="0 0 0" xyz="0 0.0 0"/>
    <child link="wall1_link"/>
  </joint>
  <link name="wall1_link">
    <inertial>
      <mass value="100"/>
      <com xyz="0 5 1"/>
      <inertia ixx="10" ixy="0" ixz="0" iyy="10" iyz="0" izz="10"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 5 1"/>
      <geometry>
        <box size="0.4 10 2"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0.0 0.0 0.0" xyz="0 5 1"/>
      <geometry>
        <box size="0.4 10 2"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="wall1_link">
    <material>PR2/Grey2</material>
    <laserRetro>1000</laserRetro>
    <selfCollide>false</selfCollide>
    <turnGravityOff>true</turnGravityOff>
  </gazebo>
  <joint name="wall2_joint" type="fixed">
    <parent link="floor1_link"/>
    <origin rpy="0 0 0" xyz="0 -1.02 0.0"/>
    <child link="wall2_link"/>
  </joint>
  <link name="wall2_link">
    <inertial>
      <mass value="100"/>
      <com xyz="0 -5 1"/>
      <inertia ixx="10" ixy="0" ixz="0" iyy="10" iyz="0" izz="10"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 -5 1"/>
      <geometry>
        <box size="0.4 10 2"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 -5 1"/>
      <geometry>
        <box size="0.4 10 2"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="wall2_link">
    <material>PR2/Grey2</material>
    <laserRetro>1500</laserRetro>
    <selfCollide>false</selfCollide>
    <turnGravityOff>true</turnGravityOff>
  </gazebo>
  <!-- <gazebo reference="door_link">
    <latchJoint>handle_joint</latchJoint>
    <latchAngle>-1.57</latchAngle>
    <doorClosedAngle>0.0</doorClosedAngle>
    <latchKp>200.0</latchKp>
    <latchKd>0.0</latchKd>
    <latchFMax>1000.0</latchFMax>
  </gazebo> -->
  <joint name="door_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0.05"/>
    <axis xyz="0 0 1"/>
    <limit effort="1000" lower="-3.14" upper="3.14" velocity="10"/>
    <safety_controller k_position="100.0" k_velocity="10.0" soft_lower_limit="-3.04" soft_upper_limit="3.04"/>
    <dynamics damping="100" friction="0.0"/>
    <parent link="wall1_link"/>
    <child link="door_link"/>
  </joint>
  <link name="door_link">
    <inertial>
      <mass value="30"/>
      <com xyz="0.0 -0.5 1.0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="3.0"/>
    </inertial>
    <visual>
      <origin rpy="0 0 3.14" xyz="0.0 -0.5 1.0"/>
      <geometry>
        <box size="0.1 1.0 2.0"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 3.14" xyz="0.0 -0.5 1.0"/>
      <geometry>
        <box size="0.1 1.0 2.0"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="door_link">
    <material>PR2/Grey</material>
    <laserRetro>2000</laserRetro>
    <turnGravityOff>true</turnGravityOff>
    <selfCollide>false</selfCollide>
    <dampingFactor>0.01</dampingFactor>
  </gazebo>
  <joint name="handle_joint" type="revolute">
    <axis xyz="1 0 0"/>
    <origin rpy="0.0 0 0" xyz="-0.11 -0.8 0.8"/>
    <limit effort="1000" lower="-0.785" upper="0.785" velocity="10"/>
    <safety_controller k_position="100.0" k_velocity="10.0" soft_lower_limit="-0.775" soft_upper_limit="0.685"/>
    <dynamics damping="10" friction="0.0"/>
    <parent link="door_link"/>
    <child link="handle_link"/>
  </joint>
  <link name="handle_link">
    <inertial>
      <mass value="0.3"/>
      <com xyz="0.0 0.06 0.0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
    <visual>
      <origin rpy="1.57 0 0" xyz="0.0 0.06 0.0"/>
      <geometry>
        <cylinder length="0.14" radius="0.013"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="1.57 0 0" xyz="0.0 0.06 0.0"/>
      <geometry>
        <cylinder length="0.14" radius="0.013"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="handle_link">
    <material>PR2/Handle</material>
    <laserRetro>3900.0</laserRetro>
    <mu1>50.0</mu1>
    <mu2>50.0</mu2>
    <kp>100000000.0</kp>
    <kd>1.0</kd>
    <turnGravityOff>true</turnGravityOff>
    <selfCollide>false</selfCollide>
    <dampingFactor>0.05</dampingFactor>
  </gazebo>
  <joint name="handle1_joint" type="fixed">
    <parent link="handle_link"/>
    <origin rpy="0 0 0" xyz="0.0 0.0 0"/>
    <child link="handle1_link"/>
  </joint>
  <link name="handle1_link">
    <inertial>
      <mass value="0.1"/>
      <com xyz="0.0 0.0 0.0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.001"/>
    </inertial>
    <visual>
      <origin rpy="0 1.57 0" xyz="0.025 0.0 0.0"/>
      <geometry>
        <cylinder length="0.05" radius="0.01"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 1.57 0" xyz="0.025 0.0 0.0"/>
      <geometry>
        <cylinder length="0.05" radius="0.01"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="handle1_link">
    <material>PR2/Handle</material>
    <laserRetro>3900.0</laserRetro>
    <turnGravityOff>true</turnGravityOff>
    <selfCollide>false</selfCollide>
  </gazebo>
  <joint name="handle2_joint" type="fixed">
    <parent link="handle_link"/>
    <origin rpy="0 0 0" xyz="0.0 0.12 0"/>
    <child link="handle2_link"/>
  </joint>
  <link name="handle2_link">
    <inertial>
      <mass value="0.1"/>
      <com xyz="0.0 0.0 0.0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.001"/>
    </inertial>
    <visual>
      <origin rpy="0 1.57 0" xyz="0.025 0.0 0.0"/>
      <geometry>
        <cylinder length="0.05" radius="0.01"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 1.57 0" xyz="0.025 0.0 0.0"/>
      <geometry>
        <cylinder length="0.05" radius="0.01"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="handle2_link">
    <material>PR2/Shiny</material>
    <laserRetro>3900.0</laserRetro>
    <turnGravityOff>true</turnGravityOff>
    <selfCollide>false</selfCollide>
  </gazebo>
  <joint name="handle3_joint" type="fixed">
    <parent link="handle_link"/>
    <origin rpy="0 0 0" xyz="0.0 0.0 0"/>
    <child link="handle3_link"/>
  </joint>
  <link name="handle3_link">
    <inertial>
      <mass value="0.1"/>
      <com xyz="0.0 0.0 0.0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.001"/>
    </inertial>
    <visual>
      <origin rpy="0 1.57 0" xyz="0.06 0.0 0.0"/>
      <geometry>
        <cylinder length="0.02" radius="0.03"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 1.57 0" xyz="0.06 0.0 0.0"/>
      <geometry>
        <cylinder length="0.02" radius="0.03"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="handle3_link">
    <material>PR2/Shiny</material>
    <laserRetro>3900.0</laserRetro>
    <turnGravityOff>true</turnGravityOff>
    <selfCollide>false</selfCollide>
  </gazebo>
  <joint name="keyhole_joint" type="fixed">
    <parent link="door_link"/>
    <origin rpy="0.0 0 0" xyz="-0.05 -0.8 0.95"/>
    <child link="keyhole_link"/>
  </joint>
  <link name="keyhole_link">
    <inertial>
      <mass value="0.1"/>
      <com xyz="0.0 0.0 0.0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.001"/>
    </inertial>
    <visual>
      <origin rpy="0 1.57 0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <cylinder length="0.02" radius="0.03"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 1.57 0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <cylinder length="0.02" radius="0.03"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="keyhole_link">
    <material>PR2/Shiny</material>
    <laserRetro>3900.0</laserRetro>
    <turnGravityOff>true</turnGravityOff>
    <selfCollide>false</selfCollide>
  </gazebo>
  <!-- <gazebo>
     gazebo_ros_p3d for position groundtruth -->
  <!-- <controller:gazebo_ros_p3d name="p3d_door_controller" plugin="libgazebo_ros_p3d.so">
        <alwaysOn>true</alwaysOn>
        <updateRate>100.0</updateRate>
        <bodyName>door_link</bodyName>
        <topicName>door_pose</topicName>
        <frameName>/map</frameName>
        <interface:position name="p3d_door_position"/>
    </controller:gazebo_ros_p3d>

    <controller:gazebo_ros_controller_manager name="door_controller_manager" plugin="libgazebo_ros_controller_manager.so">
      <alwaysOn>true</alwaysOn>
      <updateRate>1000.0</updateRate>
      <robotParam>door_description</robotParam>
      <interface:audio name="gazebo_ros_controller_manager_dummy_iface" />
    </controller:gazebo_ros_controller_manager>
  </gazebo> -->
  <!-- transmission mechanism controls -->
  <transmission name="door_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="door_motor"/>
    <joint name="door_joint"/>
    <mechanicalReduction>100</mechanicalReduction>
  </transmission>
  <transmission name="handle_trans" type="pr2_mechanism_model/SimpleTransmission">
    <actuator name="handle_motor"/>
    <joint name="handle_joint"/>
    <mechanicalReduction>100</mechanicalReduction>
  </transmission>
</robot>

